<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTA CUET UG - Official Interface</title>
    <style>
        :root {
            --nta-blue: #004a99;
            --not-visited: #eeeeee;
            --not-answered: #ff4d4d;
            --answered: #27ae60;
            --marked: #8e44ad;
            --white: #ffffff;
        }

        body { font-family: Arial, Helvetica, sans-serif; margin: 0; background-color: #f0f0f0; overflow: hidden; }

        /* Header Styles */
        .top-header { background: var(--white); border-bottom: 2px solid var(--nta-blue); padding: 5px 20px; display: flex; justify-content: space-between; align-items: center; height: 60px; }
        .top-header img { height: 45px; }
        .info-bar { background: var(--nta-blue); color: white; padding: 5px 20px; font-size: 14px; font-weight: bold; display: flex; justify-content: space-between; }

        /* Layout */
        .wrapper { display: flex; height: calc(100vh - 95px); }
        .question-area { flex: 3; background: var(--white); display: flex; flex-direction: column; border-right: 1px solid #ccc; }
        .q-header { padding: 10px 20px; background: #e3f2fd; font-weight: bold; border-bottom: 1px solid #ccc; }
        .q-content { padding: 25px; flex-grow: 1; overflow-y: auto; }
        
        .option-item { display: block; padding: 12px; margin: 8px 0; border: 1px solid #eee; border-radius: 4px; cursor: pointer; transition: 0.2s; }
        .option-item:hover { background: #f8f9fa; }
        .option-item input { margin-right: 12px; }

        /* Palette Area */
        .palette-area { flex: 1; background: var(--white); min-width: 320px; display: flex; flex-direction: column; border-left: 1px solid #ccc; }
        .user-panel { display: flex; align-items: center; padding: 10px; background: #eee; gap: 10px; }
        .user-panel img { width: 60px; height: 70px; border: 1px solid #999; background: #fff; }

        .palette-container { padding: 15px; flex-grow: 1; overflow-y: auto; }
        .palette-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin: 15px 0; }
        
        /* NTA Icons */
        .p-btn { width: 35px; height: 35px; border: 1px solid #ccc; background: var(--not-visited); display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 12px; }
        .p-btn.not-ans { background: var(--not-answered); color: white; border-radius: 50% 50% 0 0; }
        .p-btn.ans { background: var(--answered); color: white; border-radius: 0 0 50% 50%; }
        .p-btn.mfr { background: var(--marked); color: white; border-radius: 50%; }
        .p-btn.active { border: 2px solid #000; outline: 2px solid #ffeb3b; }

        /* Footer Controls */
        .footer { padding: 10px 20px; background: #f0f0f0; border-top: 1px solid #ccc; display: flex; gap: 10px; }
        button { padding: 10px 18px; cursor: pointer; border: 1px solid #999; background: #fff; font-weight: bold; }
        .btn-save { background: var(--answered); color: white; border: none; }
        .btn-mfr { background: #2980b9; color: white; border: none; }
        .btn-submit { background: var(--not-answered); color: white; border: none; width: 100%; padding: 12px; margin-top: 20px; }

        /* Analysis Screen */
        #analysis-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #f4f7f6; z-index: 9999; overflow-y: auto; padding: 40px 0; }
        .analysis-card { background: white; width: 90%; max-width: 1000px; margin: auto; padding: 30px; border-radius: 8px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        .stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 25px 0; }
        .stat-box { padding: 20px; text-align: center; border-radius: 5px; color: white; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: center; }
        th { background: #f8f9fa; }
        .tag { padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold; color: white; }
    </style>
</head>
<body>

<div id="exam-ui">
    <div class="top-header">
        <img src="https://nta.ac.in/img/nta_logo.png" alt="NTA Logo">
        <div style="text-align: right; font-size: 13px;">
            Candidate Name: <b>DEMO STUDENT</b><br>
            Subject: <b>GENERAL TEST (CUET UG)</b>
        </div>
    </div>

    <div class="info-bar">
        <span>Section: General Awareness</span>
        <span>Time Left: <span id="timer-display">45:00</span></span>
    </div>

    <div class="wrapper">
        <div class="question-area">
            <div class="q-header" id="q-label">Question No. 1</div>
            <div class="q-content">
                <p id="q-text" style="font-size: 18px; font-weight: bold;"></p>
                <div id="options-list"></div>
            </div>
            <div class="footer">
                <button onclick="clearSelection()">Clear Response</button>
                <button class="btn-mfr" onclick="markReview()">Mark for Review & Next</button>
                <button class="btn-save" onclick="saveNext()">Save & Next</button>
            </div>
        </div>

        <div class="palette-area">
            <div class="user-panel">
                <img src="https://via.placeholder.com/60x70" alt="Avatar">
                <div style="font-size: 12px;">Roll No: 20261001<br>System: 001</div>
            </div>
            <div class="palette-container">
                <div class="palette-grid" id="q-palette"></div>
                <button class="btn-submit" onclick="submitTest()">SUBMIT TEST</button>
            </div>
        </div>
    </div>
</div>

<div id="analysis-screen">
    <div class="analysis-card">
        <h1 style="color: var(--nta-blue); margin-top:0;">Detailed Result Analysis</h1>
        <div class="stats-row">
            <div class="stat-box" style="background:var(--nta-blue)">
                <small>FINAL SCORE</small><br><b style="font-size:24px" id="res-score">0</b>
            </div>
            <div class="stat-box" style="background:var(--answered)">
                <small>CORRECT</small><br><b style="font-size:24px" id="res-correct">0</b>
            </div>
            <div class="stat-box" style="background:var(--not-answered)">
                <small>INCORRECT</small><br><b style="font-size:24px" id="res-wrong">0</b>
            </div>
            <div class="stat-box" style="background:var(--marked)">
                <small>ACCURACY</small><br><b style="font-size:24px" id="res-acc">0%</b>
            </div>
        </div>
        
        <h3>Response Sheet</h3>
        <table id="analysis-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Status</th>
                    <th>Your Answer</th>
                    <th>Correct Answer</th>
                    <th>Marks</th>
                </tr>
            </thead>
            <tbody id="analysis-body"></tbody>
        </table>
        <button onclick="location.reload()" style="margin-top:20px; width:100%; background:#333; color:#fff">RESTART MOCK</button>
    </div>
</div>

<script>
    const questions = [
        { q: "Who is the Chairman of ISRO?", options: ["S. Somanath", "K. Sivan", "A.S. Kiran Kumar", "G. Madhavan Nair"], a: 0 },
        { q: "Which state is known as the 'Spices Garden of India'?", options: ["Tamil Nadu", "Karnataka", "Kerala", "Andhra Pradesh"], a: 2 },
        { q: "What is the square root of 625?", options: ["15", "25", "35", "45"], a: 1 },
        { q: "Fundamental Duties were added by which Amendment?", options: ["42nd", "44th", "52nd", "61st"], a: 0 },
        { q: "Which of these is a Kharif crop?", options: ["Wheat", "Gram", "Rice", "Mustard"], a: 2 }
    ];

    let current = 0;
    let answers = new Array(questions.length).fill(null);
    let states = new Array(questions.length).fill('nv'); // nv, ans, n-ans, mfr
    let timeLeft = 2700;

    function init() {
        render();
        updatePalette();
        setInterval(tick, 1000);
    }

    function tick() {
        if(timeLeft <= 0) submitTest();
        timeLeft--;
        let m = Math.floor(timeLeft / 60);
        let s = timeLeft % 60;
        document.getElementById('timer-display').innerText = `${m}:${s < 10 ? '0' : ''}${s}`;
    }

    function render() {
        const q = questions[current];
        document.getElementById('q-label').innerText = `Question No. ${current + 1}`;
        document.getElementById('q-text').innerText = q.q;
        
        const list = document.getElementById('options-list');
        list.innerHTML = '';
        q.options.forEach((opt, i) => {
            const div = document.createElement('label');
            div.className = 'option-item';
            const checked = answers[current] === i ? 'checked' : '';
            div.innerHTML = `<input type="radio" name="o" onclick="select(${i})" ${checked}> ${opt}`;
            list.appendChild(div);
        });

        if(states[current] === 'nv') states[current] = 'n-ans';
        updatePalette();
    }

    function select(i) { answers[current] = i; }

    function saveNext() {
        states[current] = (answers[current] !== null) ? 'ans' : 'n-ans';
        if(current < questions.length - 1) { current++; render(); }
        updatePalette();
    }

    function markReview() {
        states[current] = 'mfr';
        if(current < questions.length - 1) { current++; render(); }
        updatePalette();
    }

    function clearSelection() {
        answers[current] = null;
        states[current] = 'n-ans';
        render();
    }

    function updatePalette() {
        const p = document.getElementById('q-palette');
        p.innerHTML = '';
        states.forEach((s, i) => {
            const b = document.createElement('div');
            let cls = 'p-btn';
            if(s === 'ans') cls += ' ans';
            if(s === 'n-ans') cls += ' not-ans';
            if(s === 'mfr') cls += ' mfr';
            if(i === current) cls += ' active';
            b.className = cls;
            b.innerText = i + 1;
            b.onclick = () => { current = i; render(); };
            p.appendChild(b);
        });
    }

    function submitTest() {
        if(!confirm("Submit Test?")) return;
        document.getElementById('exam-ui').style.display = 'none';
        document.getElementById('analysis-screen').style.display = 'block';

        let correct = 0, wrong = 0, score = 0, att = 0;
        const tbody = document.getElementById('analysis-body');
        
        questions.forEach((q, i) => {
            let user = answers[i], stTag = "", marks = 0;
            if(user === null) stTag = '<span class="tag" style="background:#999">Skipped</span>';
            else if(user === q.a) { 
                correct++; att++; score += 5; marks = 5;
                stTag = '<span class="tag" style="background:var(--answered)">Correct</span>';
            } else {
                wrong++; att++; score -= 1; marks = -1;
                stTag = '<span class="tag" style="background:var(--not-answered)">Wrong</span>';
            }

            tbody.innerHTML += `<tr>
                <td>${i+1}</td><td>${stTag}</td>
                <td>${user !== null ? q.options[user] : '-'}</td>
                <td>${q.options[q.a]}</td>
                <td style="color:${marks>0?'green':'red'}"><b>${marks > 0 ? '+'+marks : marks}</b></td>
            </tr>`;
        });

        document.getElementById('res-score').innerText = score;
        document.getElementById('res-correct').innerText = correct;
        document.getElementById('res-wrong').innerText = wrong;
        document.getElementById('res-acc').innerText = att > 0 ? Math.round((correct/att)*100)+'%' : '0%';
    }

    init();
</script>

</body>
</html>